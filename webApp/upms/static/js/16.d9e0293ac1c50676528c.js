webpackJsonp([16],{IJQO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("GtFF"),n=a("gyMJ"),o={name:"Interface",data:function(){var e=this;return{showQuery:!0,systemMap:{},rules:{uri:[{required:!0,message:"URI不能为空",trigger:"blur"}],name:[{required:!0,message:"接口名称不能为空",trigger:"blur"}],systemId:[{required:!0,message:"所属系统不能为空",trigger:"blur"}]},interfaceObj:{status:1,orders:1},objStatus:!1,centerDialogVisible:!1,tableOptions:{api:n.queryInterface,query:{name:""},hideOnSinglePage:!1,staticData:[],columns:[{attr:{prop:"checkbox",type:"selection",label:"多选",width:"80"}},{attr:{type:"index",label:"序号",width:"80"}},{attr:{prop:"name",label:"接口名称","min-width":"180","show-overflow-tooltip":!0}},{attr:{prop:"systemId",label:"所属系统","min-width":"180","show-overflow-tooltip":!0,formatter:function(t,a,s,n){var o="";return null!==e.systemMap[s]&&void 0!==e.systemMap[s]&&(o=e.systemMap[s].name),o}}},{attr:{prop:"uri",label:"接口地址","min-width":"180","show-overflow-tooltip":!0}},{attr:{prop:"operation",label:"操作",width:100,fixed:"right"},template:[{el:"el-button",attr:{type:"text"},attrByRow:{disabled:function(e,t){if("2016-05-04"===t.date)return!0}},content:"修改",handle:function(t,a){e.editInterfaceRadio(a)}},{el:"el-button",attr:{type:"text"},content:"删除",handle:function(t,a){e.delInterfaceBeforeRadio(a)}}]}]}}},props:{},components:{TableBase:s.a},beforeRouteEnter:function(e,t,a){a(function(e){e.selectSystem(),e.loadData()})},beforeRouteLeave:function(e,t,a){a()},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},watch:{},computed:{},directives:{},filter:{},methods:{toggleQuery:function(){this.showQuery=!this.showQuery},refresh:function(){this.$refs.tableref.refresh()},loadData:function(){this.$refs.tableref.refresh()},clear:function(){this.tableOptions.query={}},addInterface:function(){this.objStatus=!1,this.interfaceObj={},this.centerDialogVisible=!0},editInterfaceRadio:function(e){this.interfaceObj=e,this.objStatus=!0,this.centerDialogVisible=!0},editInterfaceButton:function(){var e=this.$refs.tableref.getSelectData();0!==e.length?e.length>1?this.$message({showClose:!0,message:"修改只可选择一条记录！",type:"warning"}):(this.objStatus=!0,this.interfaceObj=e[0],this.centerDialogVisible=!0):this.$message({showClose:!0,message:"请选择要修改的记录！",type:"warning"})},delInterfaceBeforeRadio:function(e){var t=this;this.$confirm("此操作将永久删除选择记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=[];a.push(e),t.deleteInterface(a)})},delInterfaceBeforeSystemButton:function(){var e=this,t=this.$refs.tableref.getSelectData();0!==t.length?this.$confirm("此操作将永久删除选择记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteInterface(t)}):this.$message({showClose:!0,message:"请选择要修改的记录！",type:"warning"})},deleteInterface:function(e){var t=this;Object(n.delInterface)({listInterfacePo:e}).then(function(e){0===e.data.code?(t.$message({showClose:!0,message:"删除成功！",type:"success"}),t.centerDialogVisible=!1,t.loadData()):t.$message({showClose:!0,message:e.data.message,type:"error"})}).catch(function(e){console.log(e),t.$message({showClose:!0,message:"删除失败！",type:"error"})})},expInterface:function(){},selectSystem:function(){var e=this;Object(n.querySystem)({}).then(function(t){0===t.data.code&&t.data.data.forEach(function(t){e.$set(e.systemMap,t.id,t)})}).catch(function(e){console.log(e)})},saveInterfaceObj:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a=e.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.objStatus?Object(n.editInterface)(e.interfaceObj).then(function(t){a.close(),0===t.data.code?(e.$message({showClose:!0,message:"保存成功！",type:"success"}),e.centerDialogVisible=!1,e.loadData()):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(t){console.log(t),a.close(),e.$message({showClose:!0,message:"保存失败！",type:"error"})}):Object(n.addInterface)(e.interfaceObj).then(function(t){a.close(),0===t.data.code?(e.$message({showClose:!0,message:"保存成功！",type:"success"}),e.centerDialogVisible=!1,e.loadData()):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(t){console.log(t),a.close(),e.$message({showClose:!0,message:"保存失败！",type:"error"})})})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"app-container-item"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"app-form"},[a("div",{staticClass:"app-form-item"},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"输入接口名称搜索"},model:{value:e.tableOptions.query.name,callback:function(t){e.$set(e.tableOptions.query,"name",t)},expression:"tableOptions.query.name"}})],1),e._v(" "),a("div",{staticClass:"app-form-item"},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择所属系统",clearable:""},model:{value:e.tableOptions.query.systemId,callback:function(t){e.$set(e.tableOptions.query,"systemId",t)},expression:"tableOptions.query.systemId"}},e._l(e.systemMap,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"app-form-buttons"},[a("div",{staticClass:"app-form-buttons-item"},[a("el-button",{attrs:{type:"primary"},on:{click:e.loadData}},[a("ant-icon",{attrs:{"icon-class":"SearchOutlined"}}),e._v("\n            查询\n          ")],1)],1),e._v(" "),a("div",{staticClass:"app-form-buttons-item"},[a("el-button",{attrs:{type:"success"},on:{click:e.clear}},[a("ant-icon",{attrs:{"icon-class":"RedoOutlined"}}),e._v("\n            重置\n          ")],1)],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"app-hr"}),e._v(" "),a("div",{staticClass:"app-form"},[a("div",{staticClass:"app-form-buttons"},[a("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Interface:add",expression:"'upms:Interface:add'"}],staticClass:"app-form-buttons-item"},[a("el-button",{attrs:{type:"success"},on:{click:e.addInterface}},[a("ant-icon",{attrs:{"icon-class":"PlusOutlined"}}),e._v("\n            新增\n          ")],1)],1),e._v(" "),a("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Interface:upd",expression:"'upms:Interface:upd'"}],staticClass:"app-form-buttons-item"},[a("el-button",{attrs:{type:"danger"},on:{click:e.editInterfaceButton}},[a("ant-icon",{attrs:{"icon-class":"EditOutlined"}}),e._v("\n            修改\n          ")],1)],1),e._v(" "),a("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Interface:del",expression:"'upms:Interface:del'"}],staticClass:"app-form-buttons-item"},[a("el-button",{attrs:{type:"warning"},on:{click:e.delInterfaceBeforeSystemButton}},[a("ant-icon",{attrs:{"icon-class":"DeleteOutlined"}}),e._v("\n            删除\n          ")],1)],1),e._v(" "),a("div",{staticClass:"app-form-buttons-item"},[a("el-button",{attrs:{type:"warning"},on:{click:e.expInterface}},[a("ant-icon",{attrs:{"icon-class":"UploadOutlined"}}),e._v("\n            导出\n          ")],1)],1)]),e._v(" "),a("el-button-group",{staticClass:"app-form-button-group align-right"},[a("el-button",{attrs:{plain:"",type:"info",icon:"el-icon-search"},on:{click:e.toggleQuery}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refresh}})],1)],1)]),e._v(" "),a("div",{staticClass:"app-container-item"},[a("TableBase",e._b({ref:"tableref"},"TableBase",e.tableOptions,!1))],1),e._v(" "),a("el-dialog",{attrs:{title:"接口编辑",visible:e.centerDialogVisible,width:"480px"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.interfaceObj,rules:e.rules,"label-suffix":"","label-width":"120px"}},[a("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"接口名称"},model:{value:e.interfaceObj.name,callback:function(t){e.$set(e.interfaceObj,"name",t)},expression:"interfaceObj.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URI",prop:"uri"}},[a("el-input",{attrs:{placeholder:"URI"},model:{value:e.interfaceObj.uri,callback:function(t){e.$set(e.interfaceObj,"uri",t)},expression:"interfaceObj.uri"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属系统",prop:"systemId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.interfaceObj.systemId,callback:function(t){e.$set(e.interfaceObj,"systemId",t)},expression:"interfaceObj.systemId"}},e._l(e.systemMap,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveInterfaceObj}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,i,!1,function(e){a("lDN3")},"data-v-02abd4c0",null);t.default=r.exports},lDN3:function(e,t){}});
//# sourceMappingURL=16.d9e0293ac1c50676528c.js.map