webpackJsonp([17],{SwiI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("GtFF"),a=s("gyMJ"),i={components:{TableBase:o.a},name:"Role",data:function(){var e=this;return{showQuery:!0,lastSelect:[],empowerLastSelect:[],defaultCheckIds:[],defaultEmpowerCheckIds:[],idvisible:{},addOrModifyMark:!1,permissions:[],empowerPermissions:[],rules:{title:[{required:!0,message:"角色标题不能为空",trigger:"blur"}],name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],systemId:[{required:!0,message:"所属系统不能为空",trigger:"blur"}],rolePermissions:[{required:!0,message:"分配权限不能为空",trigger:"blur"}],orders:[{required:!0,message:"排序不能为空",trigger:"blur"}]},empowerRules:{systemId:[{required:!0,message:"所属系统不能为空",trigger:"blur"}],rolePermissions:[{required:!0,message:"分配权限不能为空",trigger:"blur"}]},roleObj:{status:"0",orders:1,delFlag:"0"},empowerObj:{systemId:"",rolePermissions:""},modifyRoleObj:{title:null,id:null,name:"",systemId:null,description:"",orders:1,dataScope:null,delFlag:0,version:null,rolePermissions:[]},systemMap:{},centerDialogVisible:!1,empowerDialogVisible:!1,orderType:{value:0,label:"正序"},orderTypes:[{value:0,label:"正序"},{value:1,label:"倒序"}],statusType:{value:"3",label:"全部"},statusTypes:[{value:"3",label:"全部"},{value:"0",label:"正常"},{value:"1",label:"禁用"},{value:"2",label:"系统禁用"}],dataScopeType:{value:"",label:""},dataScopeTypes:[{value:"1",label:"全部数据权限"},{value:"2",label:"自定数据权限"},{value:"3",label:"本部门数据权限"},{value:"4",label:"本部门及以下数据权限"}],tableOptions:{api:a.queryRole,query:{name:"",order:0,status:3},hideOnSinglePage:!1,staticData:[],columns:[{attr:{prop:"checkbox",type:"selection",label:"多选",width:"80"}},{attr:{type:"index",label:"序号",width:"80"}},{attr:{prop:"name",label:"角色名称","min-width":"150","show-overflow-tooltip":!0}},{attr:{prop:"title",label:"角色标题","show-overflow-tooltip":!0}},{attr:{prop:"description",label:"角色描述","min-width":"120","show-overflow-tooltip":!0}},{attr:{prop:"orders",label:"排序",width:"100"}},{attr:{prop:"systemId",label:"所属系统","min-width":"180","show-overflow-tooltip":!0,formatter:function(t,s,o,a){return null!==e.systemMap[o]&&void 0!==e.systemMap[o]?e.systemMap[o].name:""}}},{attr:{prop:"dataScope",label:"数据范围","min-width":"180","show-overflow-tooltip":!0,formatter:function(e,t,s,o){var a="";return"1"===s?a="全部数据权限":"2"===s?a="自定数据权限":"3"===s?a="本部门数据权限":"4"===s&&(a="本部门及以下数据权限"),a}}},{attr:{prop:"status",label:"状态",width:"100",formatter:function(e,t,s,o){var a="正常";return"1"===s?a="禁用":"2"===s&&(a="系统禁用"),a}}},{attr:{prop:"operation",label:"操作",width:100,fixed:"right"},template:[{el:"el-button",attr:{type:"text"},content:"修改",attrByRow:{disabled:function(e,t){if("0"!==t.status)return!0}},handle:function(t,s){e.modifyRole(s)}},{el:"el-button",attr:{type:"text"},content:"删除",attrByRow:{disabled:function(e,t){}},handle:function(t,s){e.removeRole(s)}}]}]}}},props:{},beforeRouteEnter:function(e,t,s){s(function(e){e.selectSystem()})},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},watch:{"roleObj.systemId":{handler:function(e,t){var s=this;void 0!==t&&!0===this.addOrModifyMark&&Object(a.queryPermissionTree)({systemId:this.roleObj.systemId}).then(function(e){0===e.data.code?(s.permissions=e.data.data,s.roleObj.rolePermissions=[]):s.$message({showClose:!0,message:e.data.message,type:"error"})}).catch(function(e){console.log(e),s.$message({showClose:!0,message:"根据系统ID查询权限出错！",type:"error"})})}}},computed:{},directives:{},filter:{},methods:{toggleQuery:function(){this.showQuery=!this.showQuery},refresh:function(){this.$refs.table.refresh()},nodeShow:function(e,t,s){t.visible=s},checkChange:function(e,t){var s=this,o=t.checkedKeys,a=!1;if(null!==e.children&&void 0!==e.children&&e.children.length>0&&e.children.forEach(function(e){s.lastSelect.indexOf(e.id)>-1&&(a=!0)}),this.lastSelect.indexOf(e.id)<0||this.lastSelect.indexOf(e.id)>-1&&a)o.push(e.id);else{var i=this.$common.getArrayIndex(e.id);i>-1&&o.splice(i,1)}o.indexOf(e.pid)<0&&o.push(e.pid),this.lastSelect=o,this.$refs.tree.setCheckedKeys(o)},digui:function(e){var t=this;e.forEach(function(e){null!==t.idvisible[e.id]&&void 0!==t.idvisible[e.id]&&(e.visible=t.idvisible[e.id]),null!==e.children&&t.digui(e.children)})},empowerCheckChange:function(e,t){var s=this,o=t.checkedKeys,a=!1;if(null!==e.children&&void 0!==e.children&&e.children.length>0&&e.children.forEach(function(e){s.empowerLastSelect.indexOf(e.id)>-1&&(a=!0)}),this.empowerLastSelect.indexOf(e.id)<0||this.empowerLastSelect.indexOf(e.id)>-1&&a)o.push(e.id);else{var i=this.$common.getArrayIndex(e.id);i>-1&&o.splice(i,1)}o.indexOf(e.pid)<0&&o.push(e.pid),this.empowerLastSelect=o,this.$refs.empowerTree.setCheckedKeys(o)},selectSystem:function(){var e=this;Object(a.querySystem)({}).then(function(t){0===t.data.code&&t.data.data.forEach(function(t){e.$set(e.systemMap,t.id,t)})}).catch(function(e){console.log(e)})},loadData:function(){this.tableOptions.query.order=this.orderType.value,this.tableOptions.query.status=this.statusType.value,this.$refs.table.refresh()},clear:function(){this.tableOptions.query={name:"",order:0,status:3},this.orderType={value:0,label:"正序"},this.statusType={value:"3",label:"全部"}},clearModify:function(){this.permissions=[],this.modifyRoleObj.id=null,this.modifyRoleObj.title=null,this.modifyRoleObj.name=null,this.modifyRoleObj.systemId=null,this.modifyRoleObj.description=null,this.modifyRoleObj.orders=null,this.dataScopeType={value:"",label:""},this.modifyRoleObj.dataScope=null,this.modifyRoleObj.version=null,this.modifyRoleObj.rolePermissions=null},addRole:function(){void 0!==this.$refs.tree&&this.$refs.tree.setCheckedKeys([]),this.centerDialogVisible=!0,this.addOrModifyMark=!0,this.roleObj={title:"",name:"",systemId:null,description:"",orders:1,dataScope:"",status:"0",delFlag:"0",rolePermissions:[]},this.permissions=[],this.dataScopeType={value:"",label:""}},modifyRole:function(e){var t=this;if("click"===e.type){if(1!==this.$refs.table.getSelectData().length)return void this.$message({showClose:!0,message:"请选择一条数据修改！",type:"warning"});e=this.$refs.table.getSelectData()[0]}"0"===e.status?(void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.clearValidate(),this.clearModify(),this.lastSelect=[],this.centerDialogVisible=!0,this.addOrModifyMark=!1,this.modifyRoleObj.id=e.id,this.modifyRoleObj.title=e.title,this.modifyRoleObj.name=e.name,this.modifyRoleObj.systemId=e.systemId,this.modifyRoleObj.description=e.description,this.modifyRoleObj.orders=e.orders,"1"===e.dataScope?this.dataScopeType={value:"1",label:"全部数据权限"}:"2"===e.dataScope?this.dataScopeType={value:"2",label:"自定数据权限"}:"3"===e.dataScope?this.dataScopeType={value:"3",label:"本部门数据权限"}:"4"===e.dataScope&&(this.dataScopeType={value:"4",label:"本部门及以下数据权限"}),this.modifyRoleObj.dataScope=e.dataScope,this.modifyRoleObj.version=e.version,Object(a.queryPermissionTree)({systemId:e.systemId}).then(function(e){0===e.data.code?(t.permissions=e.data.data,t.defaultCheckIds=[]):t.$message({showClose:!0,message:e.data.message,type:"error"})}).then(function(){Object(a.queryRolePermission)({id:t.modifyRoleObj.id}).then(function(e){0===e.data.code?(t.lastSelect=e.data.data.rolePermissions,t.defaultCheckIds=e.data.data.rolePermissions,t.idvisible=e.data.data.idVisible,t.digui(t.permissions)):t.$message({showClose:!0,message:e.data.message,type:"error"})})}).catch(function(e){console.log(e),t.$message({showClose:!0,message:"根据系统ID查询权限出错！",type:"error"})}),this.roleObj=this.modifyRoleObj):this.$message({showClose:!0,message:"该角色已禁用，不可以修改！",type:"warning"})},removeRole:function(e){var t=this,s=[];if("click"===e.type){if(this.$refs.table.getSelectData().length<1)return void this.$message({showClose:!0,message:"请至少选择一条数据删除！",type:"warning"});s=this.$refs.table.getSelectData()}else s.push(e);this.$confirm("确认是否删除角色，此操作无法撤销?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o={listRolePo:[]};s.forEach(function(e){var t={id:e.id,version:e.version};o.listRolePo.push(t)}),Object(a.removeRole)(o).then(function(s){e.close(),0===s.data.code?(t.$message({showClose:!0,message:"删除成功！",type:"success"}),t.$refs.table.refresh()):t.$message({showClose:!0,message:s.data.message,type:"error"})}).catch(function(s){console.log(s),e.close(),t.$message({showClose:!0,message:"删除失败！",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},empowerRole:function(){var e=this;if(1===this.$refs.table.getSelectData().length){var t=this.$refs.table.getSelectData()[0];"0"===t.status?(this.empowerLastSelect=[],this.empowerDialogVisible=!0,this.empowerObj.id=t.id,this.empowerObj.systemId=t.systemId,this.empowerObj.version=t.version,Object(a.queryPermissionTree)({systemId:t.systemId}).then(function(t){0===t.data.code?(e.empowerPermissions=t.data.data,e.defaultEmpowerCheckIds=[]):e.$message({showClose:!0,message:t.data.message,type:"error"})}).then(function(){Object(a.queryRolePermission)({id:e.empowerObj.id}).then(function(t){0===t.data.code?(e.empowerLastSelect=t.data.data.rolePermissions,e.defaultEmpowerCheckIds=t.data.data.rolePermissions,e.idvisible=t.data.data.idVisible,e.digui(e.empowerPermissions)):e.$message({showClose:!0,message:t.data.message,type:"error"})})}).catch(function(t){console.log(t),e.$message({showClose:!0,message:"根据系统ID查询权限出错！",type:"error"})})):this.$message({showClose:!0,message:"该角色已禁用，不可以授权！",type:"warning"})}else this.$message({showClose:!0,message:"请选择一条数据授权！",type:"warning"})},disableRole:function(){var e=this;if(this.$refs.table.getSelectData().length<1)this.$message({showClose:!0,message:"请至少选择一条数据！",type:"warning"});else{for(var t=this.$refs.table.getSelectData(),s=0;s<t.length;s++)if("0"!==t[s].status)return void this.$message({showClose:!0,message:"角色名称为 "+t[s].name+" 已禁用，请不要重复禁用！",type:"warning"});this.$confirm("确认是否禁用所选角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s=e.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o={listRolePo:[]};t.forEach(function(e){var t={id:e.id,version:e.version};o.listRolePo.push(t)}),Object(a.disableRole)(o).then(function(t){s.close(),0===t.data.code?(e.$message({showClose:!0,message:"禁用成功！",type:"success"}),e.$refs.table.refresh()):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(t){console.log(t),s.close(),e.$message({showClose:!0,message:"禁用失败！",type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消禁用"})})}},enableRole:function(){var e=this;if(this.$refs.table.getSelectData().length<1)this.$message({showClose:!0,message:"请至少选择一条数据！",type:"warning"});else{for(var t=this.$refs.table.getSelectData(),s=0;s<t.length;s++){if("0"===t[s].status)return void this.$message({showClose:!0,message:"角色名称为 "+t[s].name+" 正常，请不要重复启用！",type:"warning"});if("2"===t[s].status||"0"!==this.systemMap[t[s].systemId].status)return void this.$message({showClose:!0,message:"角色名称为 "+t[s].name+" 所属系统已禁用，请重新选择！",type:"warning"})}this.$confirm("确认是否启用所选角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s=e.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o={listRolePo:[]};t.forEach(function(e){var t={id:e.id,version:e.version};o.listRolePo.push(t)}),Object(a.enableRole)(o).then(function(t){s.close(),0===t.data.code?(e.$message({showClose:!0,message:"启用成功！",type:"success"}),e.$refs.table.refresh()):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(t){console.log(t),s.close(),e.$message({showClose:!0,message:"启用失败！",type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消启用"})})}},resetForm:function(){this.centerDialogVisible=!1},saveRoleObj:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var s=[];e.$refs.tree.getCheckedNodes().forEach(function(e){var t={};t.permissionId=e.id,t.visible=e.visible,s.push(t)});var o=e.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i="",l={};e.addOrModifyMark?(i="role/add",e.roleObj.dataScope=e.dataScopeType.value,e.roleObj.rolePermissionBeanList=s,l=e.roleObj):(i="role/modify",e.modifyRoleObj.dataScope=e.dataScopeType.value,e.modifyRoleObj.rolePermissionBeanList=s,l=e.modifyRoleObj),Object(a.addOrModifyRole)(i,l).then(function(t){o.close(),0===t.data.code?(e.$message({showClose:!0,message:"保存成功！",type:"success"}),e.centerDialogVisible=!1,e.$refs.tree.setCheckedKeys([]),e.loadData()):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(t){console.log(t),o.close(),e.centerDialogVisible=!1,e.$message({showClose:!0,message:"保存失败！",type:"error"})})})},saveEmpower:function(){var e=this;this.$refs.empowerRuleForm.validate(function(t){if(!t)return!1;var s=[];e.$refs.empowerTree.getCheckedNodes().forEach(function(e){var t={};t.permissionId=e.id,t.visible=e.visible,s.push(t)}),e.empowerObj.rolePermissionBeanList=s;var o=e.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(a.addOrModifyRole)("role/modify",e.empowerObj).then(function(t){o.close(),0===t.data.code?(e.$message({showClose:!0,message:"授权成功！",type:"success"}),e.empowerDialogVisible=!1,e.$refs.empowerTree.setCheckedKeys([]),e.loadData()):e.$message({showClose:!0,message:t.data.message,type:"error"})}).catch(function(t){console.log(t),o.close(),e.empowerDialogVisible=!1,e.$message({showClose:!0,message:"保存失败！",type:"error"})})})},exportRole:function(e){var t=this,s=[];if("click"===e.type){if(this.$refs.table.getSelectData().length<1)return void this.$message({showClose:!0,message:"请至少选择一条数据导出！",type:"warning"});s=this.$refs.table.getSelectData()}this.$confirm("确定是否导出数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o={listRoleExportPo:[]};t.$common.jsonSort(s,"orders",0!==t.orderType.value),s.forEach(function(e){var s={};s.name=e.name,s.title=e.title,s.description=e.description,s.orders=e.orders,s.systemName=t.systemMap[e.systemId].name,"1"===e.dataScope?s.dataScope="全部数据权限":"2"===e.dataScope?s.dataScope="自定数据权限":"3"===e.dataScope?s.dataScope="本部门数据权限":"4"===e.dataScope&&(s.dataScope="本部门及以下数据权限"),s.status="正常","1"===e.status?s.status="禁用":"2"===e.status&&(s.status="系统禁用"),s.delFlag="存在","1"===e.delFlag&&(s.delFlag="已删除"),o.listRoleExportPo.push(s)}),Object(a.downloadRoleExcel)(o).then(function(s){if(e.close(),0===s.data.code){var o=new Blob([s.data.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a"),i=window.URL.createObjectURL(o);a.href=i,a.download="角色信息.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}else t.$message({showClose:!0,message:s.data.message,type:"error"})}).catch(function(s){console.log(s),e.close(),t.$message({showClose:!0,message:"导出失败！",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消导出"})})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"app-container-item"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"app-form"},[s("div",{staticClass:"app-form-item"},[s("el-input",{staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"输入角色名称搜索"},model:{value:e.tableOptions.query.name,callback:function(t){e.$set(e.tableOptions.query,"name",t)},expression:"tableOptions.query.name"}})],1),e._v(" "),s("div",{staticClass:"app-form-item"},[s("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},e._l(e.orderTypes,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1),e._v(" "),s("div",{staticClass:"app-form-item"},[s("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.statusType,callback:function(t){e.statusType=t},expression:"statusType"}},e._l(e.statusTypes,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1),e._v(" "),s("div",{staticClass:"app-form-buttons"},[s("div",{staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"primary"},on:{click:e.loadData}},[s("ant-icon",{attrs:{"icon-class":"SearchOutlined"}}),e._v("\n              查询\n            ")],1)],1),e._v(" "),s("div",{staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"success"},on:{click:e.clear}},[s("ant-icon",{attrs:{"icon-class":"RedoOutlined"}}),e._v("\n              重置\n            ")],1)],1)])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"app-hr"}),e._v(" "),s("div",{staticClass:"app-form"},[s("div",{staticClass:"app-form-buttons"},[s("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Role:add",expression:"'upms:Role:add'"}],staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[s("ant-icon",{attrs:{"icon-class":"PlusOutlined"}}),e._v("\n              新增\n            ")],1)],1),e._v(" "),s("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Role:upd",expression:"'upms:Role:upd'"}],staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"success"},on:{click:e.modifyRole}},[s("ant-icon",{attrs:{"icon-class":"EditOutlined"}}),e._v("\n              修改\n            ")],1)],1),e._v(" "),s("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Role:del",expression:"'upms:Role:del'"}],staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"danger"},on:{click:e.removeRole}},[s("ant-icon",{attrs:{"icon-class":"DeleteOutlined"}}),e._v("\n              删除\n            ")],1)],1),e._v(" "),s("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Role:auth",expression:"'upms:Role:auth'"}],staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"warning"},on:{click:e.empowerRole}},[s("ant-icon",{attrs:{"icon-class":"UploadOutlined"}}),e._v("\n              授权\n            ")],1)],1),e._v(" "),s("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Role:unable",expression:"'upms:Role:unable'"}],staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"warning"},on:{click:e.disableRole}},[s("ant-icon",{attrs:{"icon-class":"UploadOutlined"}}),e._v("\n              禁用\n            ")],1)],1),e._v(" "),s("div",{directives:[{name:"buttonshow",rawName:"v-buttonshow",value:"upms:Role:enable",expression:"'upms:Role:enable'"}],staticClass:"app-form-buttons-item"},[s("el-button",{attrs:{type:"warning"},on:{click:e.enableRole}},[s("ant-icon",{attrs:{"icon-class":"UploadOutlined"}}),e._v("\n              启用\n            ")],1)],1)]),e._v(" "),s("el-button-group",{staticClass:"app-form-button-group align-right"},[s("el-button",{attrs:{plain:"",type:"info",icon:"el-icon-search"},on:{click:e.toggleQuery}}),e._v(" "),s("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refresh}})],1)],1)]),e._v(" "),s("div",{staticClass:"app-container-item"},[s("TableBase",e._b({ref:"table"},"TableBase",e.tableOptions,!1))],1),e._v(" "),s("el-dialog",{attrs:{title:"角色编辑",visible:e.centerDialogVisible,width:"480px"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.roleObj,rules:e.rules,"label-suffix":"","label-width":"120px"}},[s("el-form-item",{attrs:{label:"角色标题",prop:"title"}},[s("el-input",{attrs:{placeholder:"角色标题"},model:{value:e.roleObj.title,callback:function(t){e.$set(e.roleObj,"title",t)},expression:"roleObj.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[s("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.roleObj.name,callback:function(t){e.$set(e.roleObj,"name",t)},expression:"roleObj.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色所属系统",prop:"systemId"}},[s("el-select",{attrs:{placeholder:"请选择",disabled:!e.addOrModifyMark},model:{value:e.roleObj.systemId,callback:function(t){e.$set(e.roleObj,"systemId",t)},expression:"roleObj.systemId"}},e._l(e.systemMap,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"分配权限",prop:"systemId"}},[s("el-tree",{ref:"tree",attrs:{data:e.permissions,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultCheckIds,"check-strictly":!0,"expand-on-click-node":!1,props:{label:"name"}},on:{check:e.checkChange},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,a=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(e._s(o.label))]),e._v(" "),s("span",[s("el-button",{class:"0"===a.visible?"custom-tree-node-button-active":"custom-tree-node-button-normal",attrs:{size:"mini"},on:{click:function(){return e.nodeShow(o,a,"0")}}},[e._v("\n                  显示\n                ")]),e._v(" "),s("el-button",{class:"1"===a.visible?"custom-tree-node-button-active":"custom-tree-node-button-normal",attrs:{size:"mini"},on:{click:function(){return e.nodeShow(o,a,"1")}}},[e._v("\n                  隐藏\n                ")])],1)])}}])})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"角色描述"},model:{value:e.roleObj.description,callback:function(t){e.$set(e.roleObj,"description",t)},expression:"roleObj.description"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"排序",prop:"orders"}},[s("el-input-number",{attrs:{min:1},model:{value:e.roleObj.orders,callback:function(t){e.$set(e.roleObj,"orders",t)},expression:"roleObj.orders"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"数据范围",prop:"dataScope"}},[s("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:""},model:{value:e.dataScopeType,callback:function(t){e.dataScopeType=t},expression:"dataScopeType"}},e._l(e.dataScopeTypes,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1),e._v(" "),e.addOrModifyMark?s("el-form-item",{attrs:{label:"状态",prop:"status"}},[s("el-radio",{attrs:{label:"0"},model:{value:e.roleObj.status,callback:function(t){e.$set(e.roleObj,"status",t)},expression:"roleObj.status"}},[e._v("正常")]),e._v(" "),s("el-radio",{attrs:{label:"1"},model:{value:e.roleObj.status,callback:function(t){e.$set(e.roleObj,"status",t)},expression:"roleObj.status"}},[e._v("停用")])],1):e._e()],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleObj}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"角色授权",visible:e.empowerDialogVisible,width:"480px"},on:{"update:visible":function(t){e.empowerDialogVisible=t}}},[s("el-form",{ref:"empowerRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.empowerObj,"label-suffix":"","label-width":"120px"}},[s("el-form-item",{attrs:{label:"角色所属系统",prop:"systemId"}},[s("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.empowerObj.systemId,callback:function(t){e.$set(e.empowerObj,"systemId",t)},expression:"empowerObj.systemId"}},e._l(e.systemMap,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"分配权限",prop:"rolePermissions"}},[s("el-tree",{ref:"empowerTree",attrs:{data:e.empowerPermissions,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultEmpowerCheckIds,"check-strictly":!0,"expand-on-click-node":!1,props:{label:"name"}},on:{check:e.empowerCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,a=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(e._s(o.label))]),e._v(" "),s("span",[s("el-button",{class:"0"===a.visible?"custom-tree-node-button-active":"custom-tree-node-button-normal",attrs:{size:"mini"},on:{click:function(){return e.nodeShow(o,a,"0")}}},[e._v("\n                  显示\n                ")]),e._v(" "),s("el-button",{class:"1"===a.visible?"custom-tree-node-button-active":"custom-tree-node-button-normal",attrs:{size:"mini"},on:{click:function(){return e.nodeShow(o,a,"1")}}},[e._v("\n                  隐藏\n                ")])],1)])}}])})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.empowerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.saveEmpower}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=s("VU/8")(i,l,!1,function(e){s("s6g4")},"data-v-02ab5869",null);t.default=r.exports},s6g4:function(e,t){}});
//# sourceMappingURL=17.c508d047942d2a5fde15.js.map